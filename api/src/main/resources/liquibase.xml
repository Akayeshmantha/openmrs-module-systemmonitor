<?xml version="1.0" encoding="UTF-8"?>

<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog/1.9"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog/1.9
                  http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-1.9.xsd">
	
	<changeSet id="2016August18-2122" author="k-joseph">
		<preConditions onFail="MARK_RAN">
			<sqlCheck expectedResult="0">SELECT COUNT(*) FROM
				scheduler_task_config WHERE schedulable_class =
				'org.openmrs.module.systemmonitor.scheduler.MemoryAggregationTask';
			</sqlCheck>
		</preConditions>
		<comment>Add Scheduled task logging used memory later to be used in aggregation of it</comment>
		<insert tableName="scheduler_task_config">
			<column name="name" value="Used Memory Aggregation" />
			<column name="schedulable_class"
				value="org.openmrs.module.systemmonitor.scheduler.MemoryAggregationTask" />
			<column name="description"
				value="Runs every minute to log used memory to a file used when aggregating it" />
			<column name="start_time" value="2016-08-18 21:30:00" />
			<column name="start_time_pattern" value="MM/dd/yyyy HH:mm:ss" />
			<column name="repeat_interval" value="60" />
			<column name="start_on_startup" value="1" />
			<column name="started" value="1" />
			<column name="created_by" value="1" />
			<column name="date_created" value="2016-08-18 21:24:45" />
			<column name="uuid" value="B54ABA4C-0096-4F20-A1B5-81E322F1DDF7" />
		</insert>
	</changeSet>
	<changeSet id="2016Dec13-2249" author="k-joseph">
		<preConditions onFail="MARK_RAN">
			<sqlCheck expectedResult="0">SELECT COUNT(*) FROM
				scheduler_task_config WHERE schedulable_class =
				'org.openmrs.module.systemmonitor.scheduler.OpenMRSUptimeTask';
			</sqlCheck>
		</preConditions>
		<comment>Add Scheduled task logging openmrs uptime per 5 minutes as well as incrementing it</comment>
		<insert tableName="scheduler_task_config">
			<column name="name" value="OpenMRS Uptime Evaluation" />
			<column name="schedulable_class"
				value="org.openmrs.module.systemmonitor.scheduler.OpenMRSUptimeTask" />
			<column name="description"
				value="Runs every minute to log openmrs uptime" />
			<column name="start_time" value="2016-12-13 08:00:00" />
			<column name="start_time_pattern" value="MM/dd/yyyy HH:mm:ss" />
			<column name="repeat_interval" value="300" />
			<column name="start_on_startup" value="1" />
			<column name="started" value="1" />
			<column name="created_by" value="1" />
			<column name="date_created" value="2016-12-13 08:00:00" />
			<column name="uuid" value="a8300e66-c16d-11e6-a4a6-cec0c932ce01" />
		</insert>
	</changeSet>
</databaseChangeLog>